name: "Check vulnerabilities"
description: "Check the vulnerabilities in the Dockerfile"
inputs:
  grype_version:
    description: "what is the grype version to use"
    required: true
    default: 0.66.0
  image_tag:
    description: "what is the tag of the image to check"
    required: true
runs:
  using: "composite"
  steps:
    - name: Install Grype
      run: |
        curl -sSfL https://raw.githubusercontent.com/anchore/grype/main/install.sh | sh -s -- -b /usr/local/bin v${{ inputs.grype_version }}
      shell: bash
    - name: Run Grype
      run: |
        grype ${{ inputs.image_tag }}
      shell: bash
